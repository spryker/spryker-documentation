<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Migration and Integration|Updating the Legacy Demoshop with SCOS">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Making Demoshop Compatible with Shop App, Atomic Design, P&amp;S</title>
        <script>/* <![CDATA[ */
			var s = document.createElement("script");
			s.type = "text/javascript";
			s.src = "https://www.googletagmanager.com/gtag/js?id==UA-56589105-4";
			document.getElementsByTagName('head').item(0).appendChild(s);
		/* ]]> */</script>
        <script>/* <![CDATA[ */
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'UA-56589105-4');
		/* ]]> */</script>
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" />
        <link href="../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" />
        <link href="../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" />
        <link href="../resources/stylesheets/perfect-scrollbar.css" rel="stylesheet" />
        <link href="../resources/stylesheets/prism.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../resources/scripts/PIE-no-motw.htc');
}

</style>
        <link href="../resources/stylesheets/mainstyles.css" rel="stylesheet" />
        <script src="../resources/scripts/custom.modernizr.js">
        </script>
        <script src="../resources/scripts/jquery.min.js">
        </script>
        <script src="../resources/scripts/require.min.js">
        </script>
        <script src="../resources/scripts/require.config.js">
        </script>
        <script src="../resources/scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../resources/scripts/plugins.min.js">
        </script>
        <script src="../resources/scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search the Academy" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <div class="search-container">
                                    <form class="search" action="#">
                                        <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                            <input class="search-field needs-pie" type="search" placeholder="Search" />
                                            <div class="search-filter-wrapper">
                                                <div class="search-filter">
                                                    <div class="search-filter-content">
                                                        <ul>
                                                            <li>All Files</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="search-submit-wrapper" dir="ltr">
                                                <div class="search-submit" title="Search">
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="row collapse">
                                    <div class="top-bar">
                                        <div class="breadcrumbs-block">
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                        </div>
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie _Skins_SearchHome mc-component">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="topic-layout">
                                        <div>
                                            <div class="side-menu">
                                                <div data-sticky-container="" id="sGNNgMiTyUqn6Wn26OTTdA">
                                                    <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="sGNNgMiTyUqn6Wn26OTTdA:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                        <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/master.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="side-menu">
                                                <div class="toolbar-wrapper">
                                                    <div class="widget-github js-widget-github"><a class="widget-github-link js-widget-github-link" href="https://github.com/spryker/spryker-documentation" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26"><path d="M13.5 0C6.057 0 0 6.057 0 13.5c0 5.888 3.791 10.905 9.058 12.745a.463.463 0 0 0 .258.088c1.316.43 2.724.667 4.184.667C20.943 27 27 20.943 27 13.5S20.943 0 13.5 0zm0 .931c6.93 0 12.569 5.639 12.569 12.569 0 5.428-3.459 10.061-8.287 11.818a1.903 1.903 0 0 1-.092-.527v-2.446c0-.975-.477-2.037-.946-2.75 2.584-.436 5.537-1.776 5.537-6.779 0-1.37-.429-2.58-1.275-3.598.186-.611.415-1.9-.225-3.52a.47.47 0 0 0-.291-.272c-.13-.04-1.326-.35-3.806 1.277a12.921 12.921 0 0 0-6.36 0c-2.481-1.63-3.68-1.319-3.809-1.277a.47.47 0 0 0-.29.273C5.582 7.319 5.811 8.607 6 9.218c-.85 1.018-1.279 2.227-1.279 3.598 0 4.957 2.9 6.323 5.463 6.778-.322.407-.66.934-.81 1.47-.661.184-2.018.19-2.929-1.37-.032-.06-.829-1.475-2.4-1.584-.25.002-.882.042-1.035.525-.169.537.424.944.679 1.117l.058.034c.029.015.707.371 1.213 1.644.105.333 1.03 2.84 4.353 2.399.002.367 0 .552-.004.7v.26c0 .15-.045.378-.096.525C4.386 23.558.931 18.924.931 13.5.931 6.57 6.57.931 13.5.931zm6.51 5.375c.5 1.471.158 2.537.035 2.839a.468.468 0 0 0 .089.49c.805.883 1.214 1.952 1.214 3.181 0 4.72-2.796 5.666-5.535 5.97a.464.464 0 0 0-.253.815c.368.314 1.199 1.68 1.199 2.744v2.446c0 .009.001.414.134.809a12.513 12.513 0 0 1-6.792-.002c.135-.396.139-.802.139-.81l.001-.248c.002-.211.006-.497 0-1.266a.473.473 0 0 0-.174-.362.47.47 0 0 0-.391-.09c-3.126.681-3.802-1.576-3.828-1.67l-.016-.047c-.448-1.135-1.037-1.713-1.388-1.975.759.267 1.182 1.007 1.193 1.024 1.231 2.107 3.264 2.162 4.328 1.685a.463.463 0 0 0 .27-.36c.095-.665.826-1.545 1.196-1.87a.464.464 0 0 0 .136-.488.461.461 0 0 0-.39-.324c-2.73-.31-5.524-1.266-5.524-5.98 0-1.228.41-2.3 1.219-3.181a.464.464 0 0 0 .087-.491c-.124-.302-.467-1.364.031-2.837.396.013 1.362.182 2.988 1.286.112.076.256.1.387.063.973-.27 2.058-.416 3.135-.421 1.08.005 2.166.15 3.14.421.131.037.273.013.386-.063 1.635-1.11 2.6-1.275 2.984-1.288z" /></svg></a>
                                                    </div>
                                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic NextTopic Print ExpandAll CollapseAll;">
                                                        <div class="button-group-container-left">
                                                            <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                <img src="../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                            </button>
                                                            <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                <img src="../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                            </button>
                                                            <button class="button needs-pie print-button" title="Print">
                                                                <img src="../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                            </button>
                                                            <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                                <img src="../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="js-anchorer">
                                                    <h1>Making Demoshop Compatible with Shop App, Atomic Design, P&amp;S</h1>
                                                    <h2>Infrastructure Preparation</h2>
                                                    <p class="info">This has to be done only once for Demoshop (not for every feature.)</p>
                                                    <p>&#160;</p>
                                                    <h3>Shop App</h3>
                                                    <p>These steps are required to install features which use the new <a href="https://github.com/spryker-shop">shop pages and widgets</a> i.e. the shop app.</p>
                                                    <p>&#160;</p>
                                                    <h4>Add infrastructure modules</h4>
                                                    <p>To use the spryker-shop modules, you need to add new modules required by infrastructure. </p>
                                                    <p>Update all the existing modules:</p>
                                                    <p><pre><code class="language-PHP line-numbers">composer update "spryker/*"</code></pre>
                                                    </p>
                                                    <p>Remove the Event-Behavior module to avoid the version constraint problems:</p>
                                                    <p><pre><code class="language-PHP line-numbers">composer remove spryker/event-behavior</code></pre>
                                                    </p>
                                                    <p>Remove</p>
                                                    <p><pre><code class="language-PHP line-numbers">$config[EventBehaviorConstants::EVENT_BEHAVIOR_TRIGGERING_ACTIVE] = false;</code></pre>
                                                    </p>
                                                    <p>from config_default.php</p>
                                                    <p>Remove</p>
                                                    <p><pre><code class="language-PHP line-numbers">new EventBehaviorTriggerTimeoutConsole(),</code></pre>
                                                    </p>
                                                    <p>from \<var>Pyz\Zed\Console\ConsoleDependencyProvider</var></p>
                                                    <p>Install the required modules for Shop-App:</p>
                                                    <p><pre><code class="language-PHP line-numbers">composer require "spryker/kernel":"^3.24.0" spryker-shop/shop-router:"^1.0.0" <br />spryker-shop/shop-application:"^1.3.0" spryker-shop/shop-ui:"^1.0.0" --update-with-all-dependencies</code></pre>
                                                    </p>
                                                    <p>Install the required modules for Publish&amp;Synchronize:</p>
                                                    <p><i>composer require spryker/availability-storage:"^1.0.0" spryker/category-page-search:"^1.0.0" </i>
                                                        <br style="font-style: italic;" /><i>spryker/category-storage:"^1.0.0" spryker/cms-block-category-storage:"^1.0.0" </i>
                                                        <br style="font-style: italic;" /><i>spryker/cms-block-product-storage:"^1.0.0" spryker/cms-block-storage:"^1.0.0" </i>
                                                        <br style="font-style: italic;" /><i>spryker/cms-page-search:"^1.0.0" spryker/cms-storage:"^1.0.0" spryker/glossary-storage:"^1.0.0" </i>
                                                        <br style="font-style: italic;" /><i>spryker/navigation-storage:"^1.0.0" spryker/price-product-storage:"^1.0.0" </i>
                                                        <br style="font-style: italic;" /><i>spryker/product-category-filter-storage:"^1.0.0"</i>
                                                        <br style="font-style: italic;" /><i>spryker/product-category-storage:"^1.0.0" spryker/product-group-storage:"^1.0.0"</i>
                                                        <br style="font-style: italic;" /><i>spryker/product-image-storage:"^1.0.0" spryker/product-label-search:"^1.0.0"</i>
                                                        <br style="font-style: italic;" /><i>spryker/product-label-storage:"^1.0.0" spryker/product-measurement-unit:"^0.2.0"</i>
                                                        <br style="font-style: italic;" /><i>spryker/product-measurement-unit-storage:"^0.2.0" spryker/product-option-storage:"^1.0.0"</i>
                                                        <br style="font-style: italic;" /><i>spryker/product-page-search:"^1.0.0" spryker/product-relation-storage:"^1.0.0"</i>
                                                        <br style="font-style: italic;" /><i>spryker/product-review-search:"^1.0.0" spryker/product-review-storage:"^1.0.0" </i>
                                                        <br style="font-style: italic;" /><i>spryker/product-search-config-storage:"^1.0.0" spryker/product-set-page-search:"^1.0.0" </i>
                                                        <br style="font-style: italic;" /><i>spryker/product-set-storage:"^1.0.0" spryker/product-storage:"^1.0.0" </i>
                                                        <br style="font-style: italic;" /><i>spryker/url-storage:"^1.0.0"  spryker/product-quantity-storage:"^0.1.1" --update-with-all-dependencies</i><![CDATA[
		
        ]]></p>
                                                    <p>
                                                        <h4>Add namespace to configuration</h4>
                                                    </p>
                                                    <p>To let the kernel find your files within the SprykerShop Organization namespace, you need to add SprykerShop as a new namespace to <var>Spryker\Shared\Kernel\KernelConstants::CORE_NAMESPACES in your ./config/Shared/config_default.php </var></p>
                                                    <p class="info"><code class="language-PHP line-numbers">$config[\Spryker\Shared\Kernel\KernelConstants::CORE_NAMESPACES] = [
	'SprykerEco',
	'Spryker',
	'SprykerShop'
];</code>
                                                    </p>
                                                    <p>&#160;</p>
                                                    <h4>Add service providers</h4>
                                                    <p>To make all the features available from the newly added Modules, you need to add the following lines to <var>Pyz\Yves\Application\YvesBootstrap::registerServiceProviders()</var> between the registration of the TwigServiceProvider and the SprykerTwigServiceProvider.</p>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span>
                                                        <div class="MCDropDownBody dropDownBody"><b>src/Pyz/Yves/Application/YvesBootstrap.php</b><pre xml:space="preserve"><code class="language-PHP line-numbers">...
use SprykerShop\Yves\ShopApplication\Plugin\Provider\ShopApplicationServiceProvider;
use SprykerShop\Yves\ShopApplication\Plugin\Provider\ShopControllerEventServiceProvider;
use SprykerShop\Yves\ShopApplication\Plugin\Provider\ShopTwigServiceProvider;
use SprykerShop\Yves\ShopApplication\Plugin\Provider\WidgetServiceProvider;
use SprykerShop\Yves\ShopApplication\Plugin\Provider\WidgetTagServiceProvider;
use SprykerShop\Yves\ShopUi\Plugin\Provider\ShopUiTwigServiceProvider;
 
class YvesBootstrap
{
    ...
 
    protected function registerServiceProviders()
    {
        ...
 
        $this-&gt;application-&gt;register(new TwigServiceProvider()); // existing registration
 
        $this-&gt;application-&gt;register(new ShopApplicationServiceProvider());
        $this-&gt;application-&gt;register(new ShopControllerEventServiceProvider());
        $this-&gt;application-&gt;register(new ShopTwigServiceProvider());
        $this-&gt;application-&gt;register(new WidgetServiceProvider());
        $this-&gt;application-&gt;register(new WidgetTagServiceProvider());
        $this-&gt;application-&gt;register(new ShopUiTwigServiceProvider());
 
        $this-&gt;application-&gt;register(new SprykerTwigServiceProvider()); // existing registration
 
        ...
    }
}</code></pre>
                                                        </div>
                                                    </div>
                                                    <p>&#160;</p>
                                                    <h4>Inherit YvesBootstrap</h4>
                                                    <p>You need to inherit YvesBootstrap from SprykerShop\Yves\ShopApplication\YvesBootstrap</p>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span>
                                                        <div class="MCDropDownBody dropDownBody"><b>src/Pyz/Yves/Application/YvesBootstrap.php</b><pre><code class="language-PHP line-numbers">use SprykerShop\Yves\ShopApplication\YvesBootstrap as SprykerYvesBootstrap;
 
class YvesBootstrap extends SprykerYvesBootstrap{</code></pre>
                                                        </div>
                                                    </div>
                                                    <p>&#160;</p>
                                                    <h4>Adopt routers in YvesBootstrap</h4>
                                                    <p>You will also need to change the applied SilexRouter so that the new controllers from the SprykerShop namespace can be used.</p><pre><code class="language-PHP line-numbers">// use Pyz\Shared\Application\Business\Routing\SilexRouter;
use SprykerShop\Yves\ShopRouter\Plugin\Router\SilexRouter;</code></pre>
                                                    <p>&#160;</p>
                                                    <h4>Change layout for new shop app modules</h4>
                                                    <p>The new shop app modules use a new layout which is not supported in Demoshop. To make them compatible, you need to switch to the existing layout.</p>
                                                    <p>Create a file <var>page-layout-main.twig</var> and add the following code.</p>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span>
                                                        <div class="MCDropDownBody dropDownBody"><b>src/Pyz/Yves/ShopUi/Theme/default/templates/page-layout-main/page-layout-main.twig</b><pre><code class="language-PHP line-numbers">{% extends "@application/layout/layout.twig" %}</code></pre>
                                                        </div>
                                                    </div>
                                                    <p>Don't forget to flush the cache afterwards.</p><pre><code class="language-PHP line-numbers">console cache:empty-all</code></pre>
                                                    <h3>&#160;</h3>
                                                    <h3>Publish &amp; Synchronize</h3>
                                                    <p>By following this document and adjusting all the necessary changes in Demoshop, you will be able to set up the infrastructure for Publish &amp; Synchronize. If you need to learn more about any requirements needed and changes made to each particular feature, then read their own installation guides.</p>
                                                    <p>&#160;</p>
                                                    <h4>Add infrastructure modules</h4>
                                                    <p>We need to adjust the composer.json to get the latest version of the storage and search modules. By executing this code you will be able to update the library you need for running Publish &amp; Synchronize</p><i>composer update "spryker/*"
composer remove spryker/event-behavior
composer require spryker/availability-storage:"^1.0.0" spryker/category-page search:"^1.0.0" spryker/category-storage:"^1.0.0" spryker/cms-block-category-storage:"^1.0.0" spryker/cms-block-product-storage:"^1.0.0" spryker/cms-block-storage:"^1.0.0" </i>
                                                    <br style="font-style: italic;" /><i>spryker/cms-page-search:"^1.0.0" spryker/cms-storage:"^1.0.0" spryker/glossary-storage:"^1.0.0"</i>
                                                    <br style="font-style: italic;" /><i>spryker/navigation-storage:"^1.0.0" spryker/price-product-storage:"^1.0.0" </i>
                                                    <br style="font-style: italic;" /><i>spryker/product-category-filter-storage:"^1.0.0" spryker/product-category-storage:"^1.0.0" </i>
                                                    <br style="font-style: italic;" /><i>spryker/product-group-storage:"^1.0.0" spryker/product-image-storage:"^1.0.0" </i>
                                                    <br style="font-style: italic;" /><i>spryker/product-label-search:"^1.0.0" spryker/product-label-storage:"^1.0.0" </i>
                                                    <br style="font-style: italic;" /><i>spryker/product-measurement-unit:"^0.2.0" spryker/product-measurement-unit-storage:"^0.2.0" </i>
                                                    <br style="font-style: italic;" /><i>spryker/product-option-storage:"^1.0.0" spryker/product-page-search:"^1.0.0" spryker/product-relation-storage:"^1.0.0"</i>
                                                    <br style="font-style: italic;" /><i>spryker/product-review-search:"^1.0.0" spryker/product-review-storage:"^1.0.0"</i>
                                                    <br style="font-style: italic;" /><i>spryker/product-search-config-storage:"^1.0.0" spryker/product-set-page-search:"^1.0.0"</i>
                                                    <br style="font-style: italic;" /><i>spryker/product-set-storage:"^1.0.0" spryker/product-storage:"^1.0.0" </i>
                                                    <br style="font-style: italic;" /><i>spryker/url-storage:"^1.0.0"  spryker/product-quantity-storage:"^0.1.1"</i>
                                                    <br style="font-style: italic;" /><i>--update-with-dependencies
composer require "spryker/synchronization-behavior":"^1.0.0"</i><![CDATA[
        ]]><h4>Configure the queue</h4><p>Adjust queues before you start running the cron jobs, open QueueDependencyProvider.php</p><p class="important">This only works if the queue is installed on the current server.</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>src/Pyz/Zed/Queue/QueueDependencyProvider.php</b><pre><code class="language-PHP line-numbers">namespace Pyz\Zed\Queue;
 
...
 
class QueueDependencyProvider extends SprykerDependencyProvider
{
    protected function getProcessorMessagePlugins(Container $container)
    {
        return [
            EventConstants::EVENT_QUEUE =&gt; new EventQueueMessageProcessorPlugin(),
        ];
    }
}</code></pre></div></div><h4>Activate cron jobs</h4><p>Add the following jobs to jobs.php:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>config/Zed/cronjobs/jobs.php</b><pre><code class="language-PHP line-numbers">$jobs[] = [
    'name' =&gt; 'queue-worker-start',
    'command' =&gt; '$PHP_BIN vendor/bin/console queue:worker:start -vvv',
    'schedule' =&gt; '* * * * *',
    'enable' =&gt; true,
    'run_on_non_production' =&gt; true,
    'stores' =&gt; $allStores,
];
 
$jobs[] = [
    'name' =&gt; 'event-trigger-timeout',
    'command' =&gt; '$PHP_BIN vendor/bin/console event:trigger:timeout -vvv',
    'schedule' =&gt; '*/5 * * * *',
    'enable' =&gt; true,
    'run_on_non_production' =&gt; true,
    'stores' =&gt; $allStores,
];</code></pre></div></div><p>Then restart Jenkins:</p><pre><code class="language-PHP line-numbers">vendor/bin/console setup:jenkins:generate</code></pre><h4>Config</h4><p>We need to enable event behavior in config_default.php</p><pre><code class="language-PHP line-numbers">// ---------- EventBehavior
$config[EventBehaviorConstants::EVENT_BEHAVIOR_TRIGGERING_ACTIVE] = true;</code></pre><h4>Zed</h4><p>Add <var>EventBehaviorServiceProvider</var> to all the ServiceProviders methods in <var>ApplicationDependencyProvider.php</var></p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>src/Pyz/Zed/Application/ApplicationDependencyProvider.php</b><pre><code class="language-PHP line-numbers">namespace Pyz\Zed\Application;
 
use Spryker\Zed\EventBehavior\Communication\Plugin\ServiceProvider\EventBehaviorServiceProvider;
 
class ApplicationDependencyProvider extends SprykerApplicationDependencyProvider
{
    protected function getServiceProviders(Container $container)
    {
        ...
        $providers = [
            // Add Auth service providers
            ...
            new EventBehaviorServiceProvider(),
        ];
        ...</code></pre></div></div><h4>Console</h4><p>Add <var>EventBehaviorPostHookPlugin</var> to the getConsolePostRunHookPlugins() method in <var>ConsoleDependencyProvider.php</var></p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>src/Pyz/Zed/Console/ConsoleDependencyProvider.php</b><pre><code class="language-PHP line-numbers">namespace Pyz\Zed\Console;
 
use Spryker\Zed\EventBehavior\Communication\Plugin\Console\EventBehaviorPostHookPlugin;
 
class ConsoleDependencyProvider extends SprykerConsoleDependencyProvider
{
 
    /**
     * @param \Spryker\Zed\Kernel\Container $container
     *
     * @return array
     */
    public function getConsolePostRunHookPlugins(Container $container)
    {
        return [
            new EventBehaviorPostHookPlugin(),
        ];
    }</code></pre></div></div><h4>DataImporter</h4><p>Add <var>DataImportPublisherPlugin</var> and <var>DataImportEventBehaviorPlugin</var> to Pyz\Zed\DataImport\DataImportDependencyProvider</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>src/Pyz/Zed/DataImport/DataImportDependencyProvider.php</b><pre><code class="language-PHP line-numbers">use Spryker\Zed\DataImport\Communication\Plugin\DataImportEventBehaviorPlugin;
use Spryker\Zed\DataImport\Communication\Plugin\DataImportPublisherPlugin;</code></pre></div></div><p>Overwrite the core methods:</p><pre><code class="language-PHP line-numbers">/**
 * @return array
 */
protected function getDataImportBeforeImportHookPlugins(): array
{
    return [
        new DataImportEventBehaviorPlugin(),
    ];
}
 
/**
 * @return array
 */
protected function getDataImportAfterImportHookPlugins(): array
{
    return [
        new DataImportEventBehaviorPlugin(),
        new DataImportPublisherPlugin(),
    ];
}</code></pre><p>You can find all the changes in the following branch:</p><p><a href="https://github.com/spryker/demoshop/tree/tech/compatibility-pub-sync">https://github.com/spryker/demoshop/tree/tech/compatibility-pub-sync</a></p><h4>Collector data with P&amp;S features</h4><p>To be able to use the data structure provided by the collectors from Redis, you need to use your own module in a compatibility mode. You can simply do this by updating the <var>`ModuleStorageConfig::isCollectorCompatibilityMode()`</var> method of your storage module and return true.</p><p>&#160;</p><h2>Frontend</h2><h3>Atomic Frontend: integration guide for demoshop</h3><h4>index.js</h4><p>Append the following lines:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>./assets/Yves/default/app/index.js</b><pre><code class="language-PHP line-numbers">var app = require('ShopUi/app');
app.bootstrap();</code></pre></div></div><h4>vendor.entry.js</h4><p>Remove the following lines:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>./assets/Yves/default/vendor.entry.js</b><pre><code class="language-PHP line-numbers">// es6 promise fix (webpack 2)
require('es6-promise/auto');</code></pre></div></div><p>Append the following lines:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>./assets/Yves/default/vendor.entry.js</b><pre><code class="language-PHP line-numbers">require('@webcomponents/webcomponentsjs/webcomponents-bundle');</code></pre></div></div><h4>package.js</h4><p>Update the <b>script</b> section as follows:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>./package.json</b><pre><code class="language-PHP line-numbers">"scripts": {
    "yves": "node ./assets/Yves/default/build/build development",
    "yves:watch": "node ./assets/Yves/default/build/build development-watch",
    "yves:production": "node ./assets/Yves/default/build/build production",
    "zed": "node ./node_modules/@spryker/oryx-for-zed/build",
    "zed:dev": "node ./node_modules/@spryker/oryx-for-zed/build --dev",
    "zed:prod": "node ./node_modules/@spryker/oryx-for-zed/build --prod"
}</code></pre></div></div><p>Update the <b>engine</b> section as follows:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>./package.json</b><pre><code class="language-PHP line-numbers">"engines": {
    "node": "&gt;=8.9.0",
    "npm": "&gt;=5.6.0"
}</code></pre></div></div><p>Update the dependencies section as follows:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>./package.json</b><pre><code class="language-PHP line-numbers">"dependencies": {
    "@webcomponents/webcomponentsjs": "~2.0.2",
    "core-js": "~2.5.7",
    "font-awesome": "~4.7.0",
    "foundation-sites": "~6.3.1",
    "jquery": "~3.2.0",
    "slick-carousel": "~1.6.0",
    "lodash": "~4.17.2",
    "motion-ui": "~1.2.2",
    "jquery-bar-rating": "^1.2.2"
}</code></pre></div></div><p>Update the devDependencies section as follows:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>./package.json</b><pre><code class="language-PHP line-numbers">"devDependencies": {
    "@spryker/oryx-for-zed": "^2.1.0",
    "autoprefixer": "~8.6.2",
    "clean-webpack-plugin": "~0.1.19",
    "copy-webpack-plugin": "~4.5.1",
    "css-loader": "~0.28.10",
    "fast-glob": "~2.2.2",
    "file-loader": "~1.1.11",
    "mini-css-extract-plugin": "~0.4.0",
    "node-sass": "~4.9.0",
    "optimize-css-assets-webpack-plugin": "~4.0.2",
    "postcss-loader": "~2.1.5",
    "sass-loader": "~7.0.3",
    "sass-resources-loader": "~1.3.3",
    "ts-loader": "~4.4.1",
    "typescript": "~2.9.1",
    "uglifyjs-webpack-plugin": "~1.2.4",
    "webpack": "~4.12.0",
    "webpack-merge": "~4.1.3"
}</code></pre></div></div><h4>layout.twig</h4><p>Add <var>&lt;script src="/assets/default/js/runtime.js"&gt;&lt;/script&gt; </var>to <var>&lt;head</var>&gt;:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>./src/Pyz/Yves/Application/Theme/default/layout/layout.twig</b><pre><code class="language-PHP line-numbers">&lt;script src="/assets/default/js/runtime.js"&gt;&lt;/script&gt;
&lt;link rel="stylesheet" href="/assets/default/css/vendor.css" /&gt;
&lt;link rel="stylesheet" href="/assets/default/css/app.css" /&gt;</code></pre></div></div><p>Add <var>&lt;script src="/assets/default/js/es6-polyfill.js"&gt;&lt;/script&gt;</var> at the very bottom of your page, before app and vendor js:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" style="font-weight: bold;"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Click to expand the code sample</b></a></span><div class="MCDropDownBody dropDownBody"><b>/package.json</b><pre><code class="language-PHP line-numbers">&lt;script src="/assets/default/js/es6-polyfill.js"&gt;&lt;/script&gt;
&lt;script src="/assets/default/js/vendor.js"&gt;&lt;/script&gt;
&lt;script src="/assets/default/js/app.js"&gt;&lt;/script&gt;</code></pre></div></div><h4>Delete build folder</h4><p>Delete the <var>./assets/Yves/default/build/</var> folder</p><h4>Add new files</h4><p>Copy the contents of <a href="../resources/documents/integration.zip">integration.zip</a> into your project according to the folder structure defined in the zip file.</p><h4>Fix the assets/Yves/default/build/settings.js file</h4><p>Replace</p><pre><code class="language-PHP line-numbers">// define relative urls to site host (/)
const urls = {
    // assets base url
    assets: '/assets'
};</code></pre><p>to</p><pre><code class="language-PHP line-numbers">// define relative urls to site host (/)
const urls = {
    // assets base url
    assets: '/assets/default'
};</code></pre><h4>Run the installation script</h4><pre><code class="language-PHP line-numbers">install -s frontend
console cache:empty-all</code></pre><p>&#160;</p><p><b>See also:</b></p><ul><li value="1"><a href="twig-compatibility-mode-demoshop-vs-suite.htm">Using SCOS Twig templates in the Legcay Demoshop</a></li><li value="2"><a href="demoshop-to-atomic-frontend.htm">Migrating from the Legacy Demoshop to Atomic Frontend</a></li><li value="3"><a href="setting-up-shopuicompatibility.htm">Setting up ShopUiCompatibility Module in the Legacy Demoshop</a></li></ul><p>&#160;</p><p><i>Last review date: November 1st, 2018</i></p></div>
                                            </div>
                                        </div>
                                    </div>
                                </div><a class="scroll-top js-scroll-top" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill="#FFF" fill-rule="nonzero" d="M11.82 5.22a.54.54 0 0 1 0 .806.636.636 0 0 1-.852 0L6.607 1.937v13.49a.587.587 0 0 1-.602.573c-.336 0-.611-.258-.611-.573V1.937L1.04 6.026a.647.647 0 0 1-.86 0 .54.54 0 0 1 0-.807L5.573.163a.636.636 0 0 1 .852 0L11.82 5.22z" /></svg></a>
                                <script>/* <![CDATA[ */
			function createGithubUrl() {
			var GITHUB_CONTENT_PATH = '/blob/master/public';
			var link = document.querySelector('.js-widget-github-link');
			var href =
			link.getAttribute('href')
			+ GITHUB_CONTENT_PATH
			+ window.location.pathname;
			link.setAttribute('href', href);
			}
			createGithubUrl();
		/* ]]> */</script>
                                <script>/* <![CDATA[ */
			requirejs.config({
				appDir: '',
				paths: {
					'clipboard': ['https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min']
					
				}
			});
			require(['clipboard'], function(Clipboard) {
				console.log(Clipboard);
				window.Clipboard = Clipboard;
			});
		/* ]]> */</script>
                                <script src="../resources/scripts/perfect-scrollbar.js">
                                </script>
                                <script src="../resources/scripts/script.js">
                                </script>
                                <script src="../resources/scripts/prism.js">
                                </script>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>