<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Tutorials|Tutorials|Advanced">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Tutorial - Customer Import</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" />
        <link href="../../resources/stylesheets/perfect-scrollbar.css" rel="stylesheet" />
        <link href="../../resources/stylesheets/prism.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../resources/stylesheets/mainstyles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search the Academy" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <div class="search-container">
                                    <form class="search" action="#">
                                        <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                            <input class="search-field needs-pie" type="search" placeholder="Search" />
                                            <div class="search-filter-wrapper">
                                                <div class="search-filter">
                                                    <div class="search-filter-content">
                                                        <ul>
                                                            <li>All Files</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="search-submit-wrapper" dir="ltr">
                                                <div class="search-submit" title="Search">
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="row collapse">
                                    <div class="top-bar">
                                        <div class="breadcrumbs-block">
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="topic-layout">
                                        <div>
                                            <div class="side-menu">
                                                <div data-sticky-container="" id="76YCzS_420C6OQvqb97qVA">
                                                    <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="76YCzS_420C6OQvqb97qVA:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                        <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/master.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="side-menu">
                                                <div class="toolbar-wrapper">
                                                    <div class="widget-github js-widget-github"><a class="widget-github-link js-widget-github-link" href="https://github.com/spryker/spryker-documentation" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26"><path d="M13.5 0C6.057 0 0 6.057 0 13.5c0 5.888 3.791 10.905 9.058 12.745a.463.463 0 0 0 .258.088c1.316.43 2.724.667 4.184.667C20.943 27 27 20.943 27 13.5S20.943 0 13.5 0zm0 .931c6.93 0 12.569 5.639 12.569 12.569 0 5.428-3.459 10.061-8.287 11.818a1.903 1.903 0 0 1-.092-.527v-2.446c0-.975-.477-2.037-.946-2.75 2.584-.436 5.537-1.776 5.537-6.779 0-1.37-.429-2.58-1.275-3.598.186-.611.415-1.9-.225-3.52a.47.47 0 0 0-.291-.272c-.13-.04-1.326-.35-3.806 1.277a12.921 12.921 0 0 0-6.36 0c-2.481-1.63-3.68-1.319-3.809-1.277a.47.47 0 0 0-.29.273C5.582 7.319 5.811 8.607 6 9.218c-.85 1.018-1.279 2.227-1.279 3.598 0 4.957 2.9 6.323 5.463 6.778-.322.407-.66.934-.81 1.47-.661.184-2.018.19-2.929-1.37-.032-.06-.829-1.475-2.4-1.584-.25.002-.882.042-1.035.525-.169.537.424.944.679 1.117l.058.034c.029.015.707.371 1.213 1.644.105.333 1.03 2.84 4.353 2.399.002.367 0 .552-.004.7v.26c0 .15-.045.378-.096.525C4.386 23.558.931 18.924.931 13.5.931 6.57 6.57.931 13.5.931zm6.51 5.375c.5 1.471.158 2.537.035 2.839a.468.468 0 0 0 .089.49c.805.883 1.214 1.952 1.214 3.181 0 4.72-2.796 5.666-5.535 5.97a.464.464 0 0 0-.253.815c.368.314 1.199 1.68 1.199 2.744v2.446c0 .009.001.414.134.809a12.513 12.513 0 0 1-6.792-.002c.135-.396.139-.802.139-.81l.001-.248c.002-.211.006-.497 0-1.266a.473.473 0 0 0-.174-.362.47.47 0 0 0-.391-.09c-3.126.681-3.802-1.576-3.828-1.67l-.016-.047c-.448-1.135-1.037-1.713-1.388-1.975.759.267 1.182 1.007 1.193 1.024 1.231 2.107 3.264 2.162 4.328 1.685a.463.463 0 0 0 .27-.36c.095-.665.826-1.545 1.196-1.87a.464.464 0 0 0 .136-.488.461.461 0 0 0-.39-.324c-2.73-.31-5.524-1.266-5.524-5.98 0-1.228.41-2.3 1.219-3.181a.464.464 0 0 0 .087-.491c-.124-.302-.467-1.364.031-2.837.396.013 1.362.182 2.988 1.286.112.076.256.1.387.063.973-.27 2.058-.416 3.135-.421 1.08.005 2.166.15 3.14.421.131.037.273.013.386-.063 1.635-1.11 2.6-1.275 2.984-1.288z" /></svg></a>
                                                    </div>
                                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic NextTopic Print ExpandAll CollapseAll;">
                                                        <div class="button-group-container-left">
                                                            <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                            </button>
                                                            <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                            </button>
                                                            <button class="button needs-pie print-button" title="Print">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                            </button>
                                                            <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="js-anchorer">
                                                    <h1>Tutorial - Customer Import</h1>
                                                    <p>This tutorial describes the steps you need to follow in order to extend the <var>Importer</var> module functionality.</p>
                                                    <p>In this example, we’ll import customer data; of course you can update the code in this tutorial to fit your need.</p>
                                                    <h2>Customer Data File</h2>
                                                    <p>In order to import customer data from a legacy system, the data needs to be exported to a CSV file in a format that fits the new database schema.</p>
                                                    <p>In the <var>Importer</var> module, we’ll place the <var>customers.csv</var> file under the <var>src/Pyz/Zed/Importer/Business/Internal/data/</var> folder.</p>
                                                    <p>The first line in the CSV file must describe the structure of the data we need to import. The other lines must respect this given structure and one row corresponds to one entry.</p><pre><code class="language-PHP line-numbers">customer_reference,email,first_name,last_name
DE--1,test_customer1@mail.com,Test,Customer1
DE--2,test_customer2@mail.com,Test,Customer2</code></pre>
                                                    <h2>Implement Customer Installer</h2>
                                                    <p>The data installer has knowledge on where to get the data from and which data importers are able to process it. The data installer receives one or more data importers, that are executing the actual import.</p>
                                                    <p>Create the <var>CustomerInstaller</var> class under the <var>src/Pyz/Zed/Importer/Business/Installer/Customer/</var> folder.</p>
                                                    <p>Place the following code in the <var>CustomerInstaller</var> class:</p>
                                                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Click to expand the code sample</a></span>
                                                        <div class="MCDropDownBody dropDownBody"><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Zed\Importer\Business\Installer\Customer;

use Pyz\Zed\Importer\Business\Installer\AbstractInstaller;
use Spryker\Service\UtilDataReader\UtilDataReaderServiceInterface;

class CustomerInstaller extends AbstractInstaller
{

    /**
     * @return \Spryker\Service\UtilDataReader\Model\BatchIterator\CountableIteratorInterface
     */
    protected function buildBatchIterator()
    {
        return $this-&gt;utilDataReaderService-&gt;getCsvBatchIterator($this-&gt;getCsvDataFilename());
    }

    /**
     * @return string
     */
    public function getTitle()
    {
        return 'Customers';
    }

    private function getCsvDataFilename()
    {
        return $this-&gt;dataDirectory . '/customers.csv';
    }
}</code></pre>
                                                        </div>
                                                    </div>
                                                    <h3>InstallerFactory</h3>
                                                    <p>Next, in the <var>InstallerFactory</var> we need to add a method that returns an instance of our new data installer.</p><pre><code class="language-PHP line-numbers">&lt;?php
 /**
     * @return \Pyz\Zed\Importer\Business\Installer\Customer\CustomerInstaller
     */
    public function createCustomerInstaller()
    {
        $customerInstaller = new CustomerInstaller(
            $this-&gt;getImporterCustomerCollection(),
            $this-&gt;getConfig()-&gt;getImportDataDirectory()
        );

        return $customerInstaller;
    }
    /**
     * @return \Pyz\Zed\Importer\Business\Importer\ImporterInterface[]
     */
    public function getImporterCustomerCollection()
    {
        return [
            ImporterConfig::RESOURCE_CUSTOMER =&gt; $this-&gt;createImporterFactory()-&gt;createCustomerImporter(),
        ];
    }</code></pre>
                                                    <p>We’ll take care of the implementation of the customer importer further.</p>
                                                    <p>Add the resource customer constant in the <var>ImporterConfig</var>:</p><pre><code class="language-PHP line-numbers">&lt;?php
const RESOURCE_CUSTOMER = 'RESOURCE_CUSTOMER';</code></pre>
                                                    <h2>Implement Customer Importer</h2>
                                                    <p>The importer is the class responsible for processing and converting the data from a legacy format it can understand to the new format and then import it to the database. Also, it checks if the import was already executed.</p>
                                                    <p>Create the <var>CustomerImporter</var> class under the <var>src/Pyz/Zed/Importer/Business/Importer/Customer/</var> folder.</p>
                                                    <p>Place the following code in the <var>CustomerImporter</var> class:</p>
                                                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Click to expand the code sample</a></span>
                                                        <div class="MCDropDownBody dropDownBody"><pre xml:space="preserve"><code class="bash">&lt;?php

namespace Pyz\Zed\Importer\Business\Importer\Customer;

use Generated\Shared\Transfer\CustomerTransfer;
use Pyz\Zed\Importer\Business\Importer\AbstractImporter;
use Pyz\Zed\Customer\Business\CustomerFacadeInterface;

class CustomerImporter extends AbstractImporter
{
    /**
     * @var \Pyz\Zed\Customer\Business\CustomerFacadeInterface
     */
    protected $customerFacade;

    /**
     * @param \Pyz\Zed\Customer\Business\CustomerFacadeInterface $customerFacade
     */
    public function __construct(
        CustomerFacadeInterface $customerFacade
    ) {
        $this-&gt;customerFacade = $customerFacade;
    }

    /**
     * @param array $data
     *
     * @return void
     */
    protected function importOne(array $data)
    {
        $customer = $this-&gt;format($data);
        $customerTransfer = new CustomerTransfer();
        $customerTransfer-&gt;setCustomerReference($customer["customer_reference"]);
        $customerTransfer-&gt;setEmail($customer["email"]);
        $customerTransfer-&gt;setFirstName($customer["first_name"]);
        $customerTransfer-&gt;setLastName($customer["last_name"]);

        $this-&gt;customerFacade-&gt;createCustomer($customerTransfer);
    }

    /**
     * @return bool
     */
    public function isImported()
    {
        return $this-&gt;customerFacade-&gt;customersAreImported();
    }

    /**
     * @return string
     */
    public function getTitle()
    {
        return `Customer Import`;
    }
}</code></pre>
                                                        </div>
                                                    </div>
                                                    <h3>ImporterFactory</h3>
                                                    <p>Next, in the <var>ImporterFactory</var> we need to add a method that creates an instance of our new data importer.</p><pre><code class="language-PHP line-numbers">&lt;?php

    /**
     * @return \Pyz\Zed\Importer\Business\Importer\Customer\CustomerImporter
     */
    public function createCustomerImporter()
    {
        $customerImporter = new CustomerImporter(
            $this-&gt;getCustomerFacade()
        );

        return $customerImporter;
    }</code></pre>
                                                    <h3>Add the Dependency to the <var>Customer</var> Module</h3>
                                                    <p>Since we need to use the <var>CustomerFacade</var>, we need to add this dependency.</p>
                                                    <p>In the <var>ImporterDependencyProvider</var> add the dependency to the <var>CustomerBundle</var> in the <var>provideBusinessLayerDependencies(Container $container)</var> method:</p><pre><code class="language-PHP line-numbers">&lt;?php
    const FACADE_CUSTOMER = 'FACADE_CUSTOMER';

    /**
     * @param \Spryker\Zed\Kernel\Container $container
     *
     * @return \Spryker\Zed\Kernel\Container
     */
    public function provideBusinessLayerDependencies(Container $container)
    {
        $container = parent::provideBusinessLayerDependencies($container);
        //..

        $container[static::FACADE_CUSTOMER] = function (Container $container) {
            return $container-&gt;getLocator()-&gt;customer()-&gt;facade();
        };

        return $container;
    }</code></pre>
                                                    <p>Add a method that returns an instance of the <var>CustomerFacade</var> in the <var>AbstractFactory</var>:</p><pre><code class="language-PHP line-numbers">    &lt;?php
    /**
     * @return \Pyz\Zed\Category\Business\CustomerFacadeInterface
     */
    protected function getCustomerFacade()
    {
        return $this-&gt;getProvidedDependency(ImporterDependencyProvider::FACADE_CUSTOMER);
    }</code></pre>
                                                    <h2>Extend Customer Module</h2>
                                                    <p>As you can see, the importer calls some methods from the <var>CustomerFacade</var> that don’t exist yet.</p>
                                                    <p>Next, we’ll need to extend the <var>CustomerFacade</var> so that it implements and exposes those 2 methods that we need for our data import.</p>
                                                    <p>Create the <var>Business</var> layer in the <var>Customer</var> module. Add a <var>CustomerWriter</var> class, where we’ll implement the business logic for these 2 operations.</p>
                                                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Click to expand the code sample</a></span>
                                                        <div class="MCDropDownBody dropDownBody"><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Zed\Customer\Business;

use Generated\Shared\Transfer\CustomerTransfer;
use Spryker\Zed\Customer\Persistence\CustomerQueryContainerInterface;
use Orm\Zed\Customer\Persistence\SpyCustomer;

class CustomerWriter
{

    /**
     * @var \Spryker\Zed\Customer\Persistence\CustomerQueryContainerInterface
     */
    protected $queryContainer;


    /**
     * @param \Spryker\Zed\Customer\Persistence\CustomerQueryContainerInterface $queryContainer
     */
    public function __construct(CustomerQueryContainerInterface $queryContainer)
    {
        $this-&gt;queryContainer = $queryContainer;
    }

    /**
     * @return bool
     */
    public function customersAreImported()
    {
        return $this-&gt;queryContainer-&gt;queryCustomers()-&gt;count() &gt; 0;
    }

    /**
     * @param \Generated\Shared\Transfer\CustomerTransfer $customerTransfer
     */
    public function createCustomer(CustomerTransfer $customerTransfer)
    {
        $customerEntity = new SpyCustomer();
        $customerEntity-&gt;fromArray($customerTransfer-&gt;toArray());
        $customerEntity-&gt;save();
    }

}</code></pre>
                                                        </div>
                                                    </div>
                                                    <p>To be able to get an instance of the <var>CustomerWriter</var> in our facade, add a <var>CustomerBusinessFactory</var> under the business layer with a method that creates the <var>CustomerWriter</var>.</p><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Zed\Customer\Business;

use Spryker\Zed\Customer\Business\CustomerBusinessFactory as SprykerCustomerBusinessFactory;

/**
 * @method \Spryker\Zed\Customer\Persistence\CustomerQueryContainer getQueryContainer()
 */
class CustomerBusinessFactory extends SprykerCustomerBusinessFactory
{

    /**
     * @return \Pyz\Zed\Customer\Business\CustomerWriter
     */
    public function createCustomerWriter()
    {
        return new CustomerWriter($this-&gt;getQueryContainer());
    }

}</code></pre>
                                                    <p>Next, we’ll need to extend the <var>CustomerFacade</var> so that it exposes the functionality we just added.</p>
                                                    <p>First, add the <var>CustomerFacadeInterface</var> that extends the interface of the facade from the core level with 2 new operations.</p><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Zed\Customer\Business;

use Spryker\Zed\Customer\Business\CustomerFacadeInterface as SprykerCustomerFacadeInterface;
use Generated\Shared\Transfer\CustomerTransfer;

interface CustomerFacadeInterface extends SprykerCustomerFacadeInterface
{
    /**
     * @return bool
     */
    public function customersAreImported();

    /**
     * @param \Generated\Shared\Transfer\CustomerTransfer $customerTransfer
     */
    public function createCustomer(CustomerTransfer $customerTransfer);
}</code></pre>
                                                    <p>Next, add the <var>CustomerFacade</var> that extends the facade defined on the core level:</p>
                                                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Click to expand the code sample</a></span>
                                                        <div class="MCDropDownBody dropDownBody"><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Zed\Customer\Business;

use Spryker\Zed\Customer\Business\CustomerFacade as SprykerCustomerFacade;
use Generated\Shared\Transfer\CustomerTransfer;

/**
 * @method \Pyz\Zed\Customer\Business\CustomerBusinessFactory getFactory()
 */
class CustomerFacade extends SprykerCustomerFacade implements CustomerFacadeInterface
{

    /**
     * @return bool
     */
    public function customersAreImported()
    {
        return $this-&gt;getFactory()-&gt;createCustomerWriter()-&gt;customersAreImported();
    }

    /**
     * @param \Generated\Shared\Transfer\CustomerTransfer $customerTransfer
     */
    public function createCustomer(CustomerTransfer $customerTransfer)
    {
        $this-&gt;getFactory()-&gt;createCustomerWriter()-&gt;createCustomer($customerTransfer);
    }

}</code></pre>
                                                        </div>
                                                    </div>
                                                    <h2>Register the new data installer</h2>
                                                    <p>Now we’re almost ready to test the new data installer; we just need to register it in the <var>ImporterBusinessFactory</var>:</p><pre><code class="language-PHP line-numbers">&lt;?php
/**
     * @return \Pyz\Zed\Importer\Business\Installer\InstallerInterface[]
     */
    protected function getInstallerCollection()
    {
        return [
            //..
            ImporterConfig::RESOURCE_CUSTOMER =&gt; $this-&gt;createInstallerFactory()-&gt;createCustomerInstaller()
        ];
    }</code></pre>
                                                    <p>For testing the customer data installer you just need to run the data import from the command line:</p><pre><code class="language-PHP line-numbers">vendor/bin/console import:demo-data</code></pre>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div><a class="scroll-top js-scroll-top" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill="#FFF" fill-rule="nonzero" d="M11.82 5.22a.54.54 0 0 1 0 .806.636.636 0 0 1-.852 0L6.607 1.937v13.49a.587.587 0 0 1-.602.573c-.336 0-.611-.258-.611-.573V1.937L1.04 6.026a.647.647 0 0 1-.86 0 .54.54 0 0 1 0-.807L5.573.163a.636.636 0 0 1 .852 0L11.82 5.22z" /></svg></a>
                                <script>/* <![CDATA[ */
			function createGithubUrl() {
			var GITHUB_CONTENT_PATH = '/blob/master/public';
			var link = document.querySelector('.js-widget-github-link');
			var href =
			link.getAttribute('href')
			+ GITHUB_CONTENT_PATH
			+ window.location.pathname;
			link.setAttribute('href', href);
			}
			createGithubUrl();
		/* ]]> */</script>
                                <script>/* <![CDATA[ */
			requirejs.config({
				appDir: '',
				paths: {
					'clipboard': ['https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min']
					
				}
			});
			require(['clipboard'], function(Clipboard) {
				console.log(Clipboard);
				window.Clipboard = Clipboard;
			});
		/* ]]> */</script>
                                <script src="../../resources/scripts/perfect-scrollbar.js">
                                </script>
                                <script src="../../resources/scripts/script.js">
                                </script>
                                <script src="../../resources/scripts/prism.js">
                                </script>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>